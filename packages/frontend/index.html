<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äº¬éƒ½3Dãƒãƒƒãƒ—</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.136/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.136/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      width: 100%; height: 100%; margin: 0; padding: 0;
    }
    #locationBtn {
      position: absolute; top: 10px; left: 10px; z-index: 999;
      padding: 12px 20px; font-size: 16px; cursor: pointer;
      background: #4CAF50; color: white;
      border: none; border-radius: 8px;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <button id="locationBtn">ğŸ“ ç¾åœ¨åœ°ã¸ç§»å‹•</button>

<script type="module">

// â†“ã“ã“ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥ã‚Œã‚‹

Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMGY5MjhkYS02M2IxLTQzZGMtOGM4YS1hOTkzZmEyMjJiZDgiLCJpZCI6MzY5NDQxLCJpYXQiOjE3NjU2NDgzODh9.HJe1_XsvK1G59lVTjxI-ow-b9DM2bEhPDzuX7psIk9U";

const viewer = new Cesium.Viewer("cesiumContainer", {
  terrain: Cesium.Terrain.fromWorldTerrain(),
  timeline: false, animation: false
});

// æ—¥æœ¬ã®3Då»ºç‰©ã‚’è¿½åŠ 
const tileset = await Cesium.Cesium3DTileset.fromIonAssetId(2602291);
viewer.scene.primitives.add(tileset);

// åˆæœŸä½ç½®ï¼šäº¬éƒ½å¸‚å½¹æ‰€
viewer.camera.setView({
  destination: Cesium.Cartesian3.fromDegrees(135.7681, 35.0116, 800),
  orientation: {
    heading: 0, pitch: Cesium.Math.toRadians(-45), roll: 0
  }
});

// ç¾åœ¨åœ°ãƒœã‚¿ãƒ³
document.getElementById("locationBtn").addEventListener("click", () => {
  navigator.geolocation.getCurrentPosition((pos) => {
    viewer.camera.flyTo({
      destination: Cesium.Cartesian3.fromDegrees(
        pos.coords.longitude, pos.coords.latitude, 500
      ),
      duration: 2
    });
  });
});

// ãƒ¢ãƒƒã‚¯: äº¬éƒ½å¸‚ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åº§æ¨™ã‚’ãƒ”ãƒ³ã¨ã—ã¦è¿½åŠ ï¼ˆé’è‰²ã€æ·¡ãå…‰ã‚‹ï¼‰
const playerCoordinates = [
  { lat: 35.0116, lng: 135.7681 },  // äº¬éƒ½å¸‚å½¹æ‰€
  { lat: 35.0130, lng: 135.7700 },  // è¿‘ãã®æ¶ç©ºä½ç½®
  { lat: 35.0100, lng: 135.7650 },  // è¿‘ãã®æ¶ç©ºä½ç½®
  { lat: 35.0150, lng: 135.7720 }   // è¿‘ãã®æ¶ç©ºä½ç½®
];

playerCoordinates.forEach((coord, index) => {
  viewer.entities.add({
    id: `player-pin-${index}`,
    position: Cesium.Cartesian3.fromDegrees(coord.lng, coord.lat, 100),
    point: {
      pixelSize: 15,
      color: Cesium.Color.BLUE.withAlpha(0.8),  // é’è‰²ã€é€æ˜åº¦ã§æ·¡ã
      outlineColor: Cesium.Color.CYAN,  // ã‚·ã‚¢ãƒ³ã§å…‰ã‚‹åŠ¹æœ
      outlineWidth: 3
    },
    label: {
      text: `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ${index + 1}`,
      font: "10pt sans-serif",
      fillColor: Cesium.Color.WHITE,
      outlineColor: Cesium.Color.BLACK,
      outlineWidth: 1,
      verticalOrigin: Cesium.VerticalOrigin.BOTTOM,
      pixelOffset: new Cesium.Cartesian2(0, -40)
    }
  });
});


</script>

</body>

</html>
